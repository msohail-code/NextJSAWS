{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/ACS/Downloads/Compressed/client-master_2/client-master/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/ACS/Downloads/Compressed/client-master_2/client-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/ACS/Downloads/Compressed/client-master_2/client-master/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ACS\\\\Downloads\\\\Compressed\\\\client-master_2\\\\client-master\\\\src\\\\components\\\\helpers.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _this = this,\n    _s4 = $RefreshSig$();\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nimport Head from \"next/head\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Footer from \"../pages/footer\";\nimport Header from \"../pages/header\";\nimport Login from \"./login\";\nimport useTranslation from \"next-translate/useTranslation\";\nimport { useRouter } from \"next/router\";\nexport function getProductPrice(product) {\n  if (product.salePrice !== 0) {\n    return parseFloat(product.salePrice.toFixed(2));\n  }\n\n  return parseFloat(product.ragularPrice.toFixed(2));\n}\nexport function formatPrice(price) {\n  _s();\n\n  var storeConfig = useSelector(function (state) {\n    return state.config;\n  });\n  price = parseFloat((price * storeConfig.currency.value).toFixed(2));\n  return new Intl.NumberFormat('en-IN', {\n    style: \"currency\",\n    currency: storeConfig.currency.code\n  }).format(price).replace(\"THB\", \"฿\").replace(\"$\", \"$\");\n}\n\n_s(formatPrice, \"HR2dM6xVgn1cI+d3q51/tKd6Txw=\", false, function () {\n  return [useSelector];\n});\n\nexport function formatCurrency(val, currency) {\n  val = parseFloat((val * currency.value).toFixed(2));\n  return new Intl.NumberFormat('en-IN', {\n    style: \"currency\",\n    currency: currency.code\n  }).format(val).replace(\"THB\", \"฿\").replace(\"$\", \"$\");\n}\nexport function GetPriceHtml(props) {\n  _s2();\n\n  var quantity = props.quantity ? props.quantity : props.product.minOrderQuantity;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  if (props.product.salePrice === 0) {\n    formatPrice(1); // dummy call\n\n    return formatPrice(props.product.ragularPrice * quantity) + \"/\" + t(\"common:meter\");\n  }\n\n  var discountPer = 100 * (props.product.ragularPrice * quantity - props.product.salePrice * quantity) / (props.product.ragularPrice * quantity);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [formatPrice(props.product.salePrice * quantity), \" \", /*#__PURE__*/_jsxDEV(\"del\", {\n      style: {\n        color: \"#bfbfbf\"\n      },\n      children: [formatPrice(props.product.ragularPrice * quantity), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 63\n    }, this), \"/ \", t(\"common:meter\"), \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"disPer\",\n      children: [\"(\", Math.round(discountPer), \"% \", t(\"common:off\"), \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 178\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(GetPriceHtml, \"zlIdU9EjM2llFt74AbE2KsUJXyM=\", false, function () {\n  return [useTranslation];\n});\n\n_c = GetPriceHtml;\nexport function stockStatus(product) {\n  var isCart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (isCart) {\n    if (product.cartProducts.status === 1) {\n      return {\n        status: 1\n      };\n    }\n\n    if (!product.currentStockStatus) {\n      return {\n        status: 2,\n        message: \"Out of Stock\"\n      };\n    }\n\n    if (product.cartProducts.status === 2) {\n      return {\n        status: 3,\n        message: \"Only \".concat(product.quantity, \" In Stock\")\n      };\n    }\n\n    return {\n      status: 1\n    };\n  }\n\n  return product.currentStockStatus;\n}\nexport function formatAddress(address) {\n  var isOrder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var addressArr = [];\n\n  if (isOrder) {\n    address.address && addressArr.push(address.address);\n    address.zone && addressArr.push(address.zone);\n    address.country && addressArr.push(address.country);\n    address.postcode && addressArr.push(address.postcode);\n  } else {\n    address.address && addressArr.push(address.address);\n    address.zone && addressArr.push(address.zone.name);\n    address.country && addressArr.push(address.country.name);\n    address.postcode && addressArr.push(address.postcode);\n  }\n\n  return addressArr.join(\", \");\n}\nexport var withAuth = function withAuth(Component) {\n  var _s3 = $RefreshSig$();\n\n  var Auth = function Auth(props) {\n    _s3();\n\n    var isLoggedIn = useSelector(function (state) {\n      return state.config.auth ? state.config.auth : false;\n    });\n\n    if (!isLoggedIn) {\n      return /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Head, {\n          children: /*#__PURE__*/_jsxDEV(\"title\", {\n            children: \"Login - Gandhi Fabrics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Header, {\n          shadow: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, _this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, props), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }, _this);\n  }; // Copy getInitial props so it will run as well\n\n\n  _s3(Auth, \"wwozkPYuXjHFfszlt2mcSB3o0is=\", false, function () {\n    return [useSelector];\n  });\n\n  if (Component.getInitialProps) {\n    Auth.getInitialProps = Component.getInitialProps;\n  }\n\n  return Auth;\n};\nexport function useCart() {\n  _s4();\n\n  var _useState = useState(false),\n      isAdding = _useState[0],\n      setIsAdding = _useState[1];\n\n  var _useState2 = useState(false),\n      isRemoving = _useState2[0],\n      setIsRemoving = _useState2[1];\n\n  var _useState3 = useState(false),\n      isApplyingCoupon = _useState3[0],\n      setIsApplyingCoupon = _useState3[1];\n\n  var _useState4 = useState(1),\n      reload = _useState4[0],\n      setReload = _useState4[1];\n\n  var cartId = useSelector(function (state) {\n    return state.config.cartId ? state.config.cartId : null;\n  });\n  var dispatch = useDispatch();\n\n  var _useState5 = useState(false),\n      isAddingToWishlist = _useState5[0],\n      setIsAddingToWishlist = _useState5[1];\n\n  var _useState6 = useState(false),\n      disableCheckout = _useState6[0],\n      setDisableCheckout = _useState6[1];\n\n  var _useState7 = useState(null),\n      customerCartData = _useState7[0],\n      setCustomerCartData = _useState7[1];\n\n  var _useRouter = useRouter(),\n      locale = _useRouter.locale;\n\n  var headers = {\n    headers: {\n      lang: locale === \"en\" ? \"\" : locale\n    }\n  };\n  useEffect(function () {\n    cartId && axios.get(\"\".concat(process.env.API_URL, \"cart/\").concat(cartId), headers).then(function (res) {\n      var disableCheckout = false;\n\n      var _iterator = _createForOfIteratorHelper(res.data.products),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var cp = _step.value;\n\n          if (cp.cartProducts.status === 2) {\n            disableCheckout = true;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      setDisableCheckout(disableCheckout);\n      setCustomerCartData(res.data);\n      dispatch({\n        type: \"SET_CART_DATA\",\n        payload: res.data\n      });\n      dispatch({\n        type: \"SET_CART_ITEMS\",\n        payload: res.data.products.length + \"\"\n      });\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [reload, cartId]);\n  useEffect(function () {\n    calculateCart();\n  }, [cartId]);\n\n  function calculateCart() {\n    return _calculateCart.apply(this, arguments);\n  }\n\n  function _calculateCart() {\n    _calculateCart = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              if (!cartId) {\n                _context7.next = 2;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", axios.post(\"\".concat(process.env.API_URL, \"cart/calculateCart\"), {\n                cartId: cartId\n              }));\n\n            case 2:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    return _calculateCart.apply(this, arguments);\n  }\n\n  var calcShiping = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(addressId, storePickup) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post(\"\".concat(process.env.API_URL, \"cart/calculateShipping\"), {\n                cartId: cartId,\n                addressId: addressId,\n                storePickup: storePickup\n              });\n\n            case 3:\n              _context.next = 5;\n              return axios.post(\"\".concat(process.env.API_URL, \"cart/allocateStock\"), {\n                cartId: cartId\n              });\n\n            case 5:\n              _context.next = 7;\n              return calculateCart();\n\n            case 7:\n              setReload(reload + 1);\n              return _context.abrupt(\"return\", {\n                message: \"Shipping Calculated\"\n              });\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              throw new Error(_context.t0);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n\n    return function calcShiping(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var addToCart = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id, qty) {\n      var cartProductId,\n          response,\n          message,\n          _message,\n          _args2 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              cartProductId = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : null;\n              _context2.prev = 1;\n              setIsAdding(true);\n\n              if (!cartId) {\n                _context2.next = 8;\n                break;\n              }\n\n              _context2.next = 6;\n              return axios.patch(\"\".concat(process.env.API_URL, \"cart\"), {\n                productId: parseInt(id),\n                quantity: qty,\n                cartId: cartId,\n                cartProductId: cartProductId\n              });\n\n            case 6:\n              _context2.next = 12;\n              break;\n\n            case 8:\n              _context2.next = 10;\n              return axios.post(\"\".concat(process.env.API_URL, \"cart\"), {\n                productId: parseInt(id),\n                quantity: qty\n              });\n\n            case 10:\n              response = _context2.sent;\n              dispatch({\n                type: \"ADD_TO_CART\",\n                payload: response.data.id\n              });\n\n            case 12:\n              _context2.next = 14;\n              return calculateCart();\n\n            case 14:\n              setIsAdding(false);\n              setReload(reload + 1);\n              message = cartId ? \"Cart updated\" : \"Item added\";\n              return _context2.abrupt(\"return\", {\n                type: \"success\",\n                message: message,\n                title: \"Success\"\n              });\n\n            case 20:\n              _context2.prev = 20;\n              _context2.t0 = _context2[\"catch\"](1);\n              setIsAdding(false);\n              _message = cartId ? \"Couldn't be updated\" : \"Couldn't be added\";\n              return _context2.abrupt(\"return\", {\n                type: \"error\",\n                message: _message,\n                title: \"Error\"\n              });\n\n            case 25:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 20]]);\n    }));\n\n    return function addToCart(_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var remove = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              setIsRemoving(true);\n              _context3.next = 4;\n              return axios.post(\"\".concat(process.env.API_URL, \"cart/remove\"), {\n                cartId: cartId,\n                cartProductId: id\n              });\n\n            case 4:\n              _context3.next = 6;\n              return calculateCart();\n\n            case 6:\n              setIsRemoving(false);\n              setReload(reload + 1);\n              return _context3.abrupt(\"return\", {\n                type: \"success\",\n                message: \"Item Removed\",\n                title: \"Success\"\n              });\n\n            case 11:\n              _context3.prev = 11;\n              _context3.t0 = _context3[\"catch\"](0);\n              setIsRemoving(false);\n              setReload(reload + 1);\n              return _context3.abrupt(\"return\", {\n                type: \"error\",\n                message: \"Not Removed\",\n                title: \"Error\"\n              });\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 11]]);\n    }));\n\n    return function remove(_x5) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var addtoWishList = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              setIsAddingToWishlist(true);\n              _context4.next = 4;\n              return axios.post(\"\".concat(process.env.API_URL, \"wishlist\"), {\n                productId: id\n              });\n\n            case 4:\n              res = _context4.sent;\n              setIsAddingToWishlist(false);\n              /*  setReload1(reload1 + 1) */\n\n              return _context4.abrupt(\"return\", {\n                type: \"success\",\n                message: res.data.message,\n                title: \"Success\"\n              });\n\n            case 9:\n              _context4.prev = 9;\n              _context4.t0 = _context4[\"catch\"](0);\n              setIsAddingToWishlist(false);\n\n              if (!(_context4.t0.response.status === 401)) {\n                _context4.next = 14;\n                break;\n              }\n\n              return _context4.abrupt(\"return\", {\n                type: \"error\",\n                message: \"Please login to add!\",\n                title: \"Error\"\n              });\n\n            case 14:\n              return _context4.abrupt(\"return\", {\n                type: \"error\",\n                message: \"Something went wrong!\",\n                title: \"Error\"\n              });\n\n            case 15:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 9]]);\n    }));\n\n    return function addtoWishList(_x6) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var applyCoupon = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(code) {\n      var message;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              setIsApplyingCoupon(true);\n              _context5.next = 4;\n              return axios.post(\"\".concat(process.env.API_URL, \"cart/applyCoupon\"), {\n                cartId: cartId,\n                couponCode: code\n              });\n\n            case 4:\n              _context5.next = 6;\n              return calculateCart();\n\n            case 6:\n              setReload(reload + 1);\n              setIsApplyingCoupon(false);\n              return _context5.abrupt(\"return\", {\n                type: \"success\",\n                message: \"Coupon Applied\",\n                title: \"Success\"\n              });\n\n            case 11:\n              _context5.prev = 11;\n              _context5.t0 = _context5[\"catch\"](0);\n              setIsApplyingCoupon(false);\n              message = _context5.t0.response.data.message ? _context5.t0.response.data.message : \"Invalid Coupon\";\n              return _context5.abrupt(\"return\", {\n                type: \"error\",\n                message: message,\n                title: \"Error\"\n              });\n\n            case 16:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[0, 11]]);\n    }));\n\n    return function applyCoupon(_x7) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var removeCoupon = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              setIsApplyingCoupon(true);\n              _context6.next = 4;\n              return axios.post(\"\".concat(process.env.API_URL, \"cart/removeCoupon\"), {\n                cartId: cartId\n              });\n\n            case 4:\n              _context6.next = 6;\n              return calculateCart();\n\n            case 6:\n              setReload(reload + 1);\n              setIsApplyingCoupon(false);\n              return _context6.abrupt(\"return\", {\n                type: \"success\",\n                message: \"Coupon Removed\",\n                title: \"Success\"\n              });\n\n            case 11:\n              _context6.prev = 11;\n              _context6.t0 = _context6[\"catch\"](0);\n              setIsApplyingCoupon(false);\n              return _context6.abrupt(\"return\", {\n                type: \"error\",\n                message: \"Something went wrong\",\n                title: \"Error\"\n              });\n\n            case 15:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[0, 11]]);\n    }));\n\n    return function removeCoupon() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  return {\n    cartId: cartId,\n    isAdding: isAdding,\n    isRemoving: isRemoving,\n    addToCart: addToCart,\n    remove: remove,\n    addtoWishList: addtoWishList,\n    isAddingToWishlist: isAddingToWishlist,\n    disableCheckout: disableCheckout,\n    applyCoupon: applyCoupon,\n    removeCoupon: removeCoupon,\n    isApplyingCoupon: isApplyingCoupon,\n    calcShiping: calcShiping,\n    customerCartData: customerCartData\n  };\n}\n\n_s4(useCart, \"yi/y5MbgBvXRkbLQbnKN7sJw5kc=\", false, function () {\n  return [useSelector, useDispatch, useRouter];\n});\n\nvar _c;\n\n$RefreshReg$(_c, \"GetPriceHtml\");","map":{"version":3,"sources":["C:/Users/ACS/Downloads/Compressed/client-master_2/client-master/src/components/helpers.js"],"names":["axios","Head","Fragment","useEffect","useState","useDispatch","useSelector","Footer","Header","Login","useTranslation","useRouter","getProductPrice","product","salePrice","parseFloat","toFixed","ragularPrice","formatPrice","price","storeConfig","state","config","currency","value","Intl","NumberFormat","style","code","format","replace","formatCurrency","val","GetPriceHtml","props","quantity","minOrderQuantity","t","discountPer","color","Math","round","stockStatus","isCart","cartProducts","status","currentStockStatus","message","formatAddress","address","isOrder","addressArr","push","zone","country","postcode","name","join","withAuth","Component","Auth","isLoggedIn","auth","getInitialProps","useCart","isAdding","setIsAdding","isRemoving","setIsRemoving","isApplyingCoupon","setIsApplyingCoupon","reload","setReload","cartId","dispatch","isAddingToWishlist","setIsAddingToWishlist","disableCheckout","setDisableCheckout","customerCartData","setCustomerCartData","locale","headers","lang","get","process","env","API_URL","then","res","data","products","cp","type","payload","length","err","console","log","calculateCart","post","calcShiping","addressId","storePickup","Error","addToCart","id","qty","cartProductId","patch","productId","parseInt","response","title","remove","addtoWishList","applyCoupon","couponCode","removeCoupon"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport Head from \"next/head\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Footer from \"../pages/footer\";\nimport Header from \"../pages/header\";\nimport Login from \"./login\";\nimport useTranslation from \"next-translate/useTranslation\";\nimport { useRouter } from \"next/router\";\n\nexport function getProductPrice(product) {\n    if (product.salePrice !== 0) {\n        return parseFloat(product.salePrice.toFixed(2))\n    }\n\n    return parseFloat(product.ragularPrice.toFixed(2))\n}\n\nexport function formatPrice(price) {\n    const storeConfig = useSelector(state => state.config);\n    price = parseFloat((price * storeConfig.currency.value).toFixed(2))\n    return new Intl.NumberFormat('en-IN', { style: \"currency\", currency: storeConfig.currency.code }).format(price).replace(\"THB\", \"฿\").replace(\"$\", \"$\");\n}\n\nexport function formatCurrency(val, currency) {\n    val = parseFloat((val * currency.value).toFixed(2));\n    return new Intl.NumberFormat('en-IN', { style: \"currency\", currency: currency.code }).format(val).replace(\"THB\", \"฿\").replace(\"$\", \"$\");\n}\n\nexport function GetPriceHtml(props) {\n    let quantity = props.quantity ? props.quantity : props.product.minOrderQuantity\n    const { t } = useTranslation()\n\n    if (props.product.salePrice === 0) {\n        formatPrice(1) // dummy call\n        return (formatPrice(props.product.ragularPrice * quantity)) + \"/\" + t(\"common:meter\")\n    }\n\n    let discountPer = 100 * ((props.product.ragularPrice * quantity) - (props.product.salePrice * quantity)) / (props.product.ragularPrice * quantity);\n\n    return (\n        <Fragment>\n            {formatPrice(props.product.salePrice * quantity)} <del style={{ color: \"#bfbfbf\" }}>{formatPrice(props.product.ragularPrice * quantity)} </del>/ {t(\"common:meter\")} <i className=\"disPer\">({Math.round(discountPer)}% {t(\"common:off\")})</i>\n        </Fragment>\n    )\n}\n\nexport function stockStatus(product, isCart = false) {\n    if (isCart) {\n\n        if (product.cartProducts.status === 1) {\n            return { status: 1 };\n        }\n\n        if (!product.currentStockStatus) {\n            return { status: 2, message: \"Out of Stock\" };\n        }\n\n        if (product.cartProducts.status === 2) {\n            return { status: 3, message: `Only ${product.quantity} In Stock` };\n        }\n\n        return { status: 1 };\n    }\n\n    return product.currentStockStatus\n}\n\nexport function formatAddress(address, isOrder = false) {\n    let addressArr = []\n    if (isOrder) {\n        address.address && addressArr.push(address.address)\n        address.zone && addressArr.push(address.zone)\n        address.country && addressArr.push(address.country)\n        address.postcode && addressArr.push(address.postcode)\n    } else {\n        address.address && addressArr.push(address.address)\n        address.zone && addressArr.push(address.zone.name)\n        address.country && addressArr.push(address.country.name)\n        address.postcode && addressArr.push(address.postcode)\n    }\n\n    return addressArr.join(\", \");\n}\n\nexport const withAuth = Component => {\n    const Auth = (props) => {\n        const isLoggedIn = useSelector(state => state.config.auth ? state.config.auth : false);\n\n        if (!isLoggedIn) {\n            return (\n                <Fragment>\n                    <Head>\n                        <title>Login - Gandhi Fabrics</title>\n                    </Head>\n                    <Header shadow />\n                    <Login />\n                    <Footer />\n                </Fragment>\n            )\n        }\n\n        return (<Component {...props} />)\n    }\n\n    // Copy getInitial props so it will run as well\n    if (Component.getInitialProps) {\n        Auth.getInitialProps = Component.getInitialProps;\n    }\n\n    return Auth;\n}\n\nexport function useCart() {\n    const [isAdding, setIsAdding] = useState(false);\n    const [isRemoving, setIsRemoving] = useState(false);\n    const [isApplyingCoupon, setIsApplyingCoupon] = useState(false);\n    const [reload, setReload] = useState(1);\n    const cartId = useSelector(state => state.config.cartId ? state.config.cartId : null);\n    const dispatch = useDispatch();\n    const [isAddingToWishlist, setIsAddingToWishlist] = useState(false);\n    const [disableCheckout, setDisableCheckout] = useState(false);\n    const [customerCartData, setCustomerCartData] = useState(null);\n    const { locale } = useRouter()\n\n    const headers = { headers: { lang: locale === \"en\" ? \"\" : locale } }\n\n    useEffect(() => {\n        cartId && axios.get(`${process.env.API_URL}cart/${cartId}`, headers).then((res) => {\n            let disableCheckout = false;\n            for (let cp of res.data.products) {\n                if (cp.cartProducts.status === 2) {\n                    disableCheckout = true;\n                    break;\n                }\n            }\n            setDisableCheckout(disableCheckout);\n            setCustomerCartData(res.data);\n            dispatch({ type: \"SET_CART_DATA\", payload: res.data });\n            dispatch({ type: \"SET_CART_ITEMS\", payload: res.data.products.length + \"\" });\n        }).catch((err) => {\n            console.log(err);\n        });\n    }, [reload, cartId]);\n\n    useEffect(() => {\n        calculateCart();\n    }, [cartId]);\n\n    async function calculateCart() {\n        if (cartId) return axios.post(`${process.env.API_URL}cart/calculateCart`, { cartId: cartId });\n    }\n\n    const calcShiping = async (addressId, storePickup) => {\n        try {\n            await axios.post(`${process.env.API_URL}cart/calculateShipping`, { cartId: cartId, addressId: addressId, storePickup });\n            await axios.post(`${process.env.API_URL}cart/allocateStock`, { cartId: cartId });\n            await calculateCart();\n            setReload(reload + 1);\n            return { message: \"Shipping Calculated\" };\n        } catch (err) {\n            throw new Error(err);\n        }\n    }\n\n    const addToCart = async (id, qty, cartProductId = null) => {\n        try {\n            setIsAdding(true);\n            if (cartId) {\n                await axios.patch(`${process.env.API_URL}cart`, { productId: parseInt(id), quantity: qty, cartId: cartId, cartProductId: cartProductId });\n            } else {\n                let response = await axios.post(`${process.env.API_URL}cart`, { productId: parseInt(id), quantity: qty });\n                dispatch({ type: \"ADD_TO_CART\", payload: response.data.id });\n            }\n\n            await calculateCart();\n            setIsAdding(false);\n            setReload(reload + 1);\n            let message = cartId ? \"Cart updated\" : \"Item added\";\n            return { type: \"success\", message: message, title: \"Success\" };\n        } catch (err) {\n            setIsAdding(false);\n            let message = cartId ? \"Couldn't be updated\" : \"Couldn't be added\";\n            return { type: \"error\", message: message, title: \"Error\" };\n        }\n    }\n\n    const remove = async (id) => {\n        try {\n            setIsRemoving(true);\n            await axios.post(`${process.env.API_URL}cart/remove`, {\n                cartId: cartId,\n                cartProductId: id\n            });\n\n            await calculateCart();\n            setIsRemoving(false);\n            setReload(reload + 1);\n            return { type: \"success\", message: \"Item Removed\", title: \"Success\" };\n        } catch (err) {\n            setIsRemoving(false);\n            setReload(reload + 1);\n            return { type: \"error\", message: \"Not Removed\", title: \"Error\" };\n        }\n    }\n\n    const addtoWishList = async (id) => {\n        try {\n            setIsAddingToWishlist(true);\n            let res = await axios.post(`${process.env.API_URL}wishlist`, { productId: id });\n            setIsAddingToWishlist(false);\n            /*  setReload1(reload1 + 1) */\n            return { type: \"success\", message: res.data.message, title: \"Success\" };\n        } catch (err) {\n            setIsAddingToWishlist(false);\n            if (err.response.status === 401) {\n                return { type: \"error\", message: \"Please login to add!\", title: \"Error\" };\n            }\n            return { type: \"error\", message: \"Something went wrong!\", title: \"Error\" };\n        }\n    }\n\n    const applyCoupon = async (code) => {\n        try {\n            setIsApplyingCoupon(true);\n            await axios.post(`${process.env.API_URL}cart/applyCoupon`, {\n                cartId: cartId,\n                couponCode: code\n            });\n\n            await calculateCart();\n            setReload(reload + 1);\n            setIsApplyingCoupon(false);\n            return { type: \"success\", message: \"Coupon Applied\", title: \"Success\" };\n        } catch (err) {\n            setIsApplyingCoupon(false);\n            let message = err.response.data.message ? err.response.data.message : \"Invalid Coupon\"\n            return { type: \"error\", message: message, title: \"Error\" };\n        }\n    }\n\n    const removeCoupon = async () => {\n        try {\n            setIsApplyingCoupon(true);\n            await axios.post(`${process.env.API_URL}cart/removeCoupon`, {\n                cartId: cartId,\n            });\n\n            await calculateCart();\n            setReload(reload + 1);\n            setIsApplyingCoupon(false);\n            return { type: \"success\", message: \"Coupon Removed\", title: \"Success\" };\n        } catch (err) {\n            setIsApplyingCoupon(false);\n            return { type: \"error\", message: \"Something went wrong\", title: \"Error\" };\n        }\n    }\n\n    return {\n        cartId, isAdding, isRemoving, addToCart, remove, addtoWishList,\n        isAddingToWishlist, disableCheckout, applyCoupon, removeCoupon, isApplyingCoupon, calcShiping, customerCartData\n    }\n}"]},"metadata":{},"sourceType":"module"}